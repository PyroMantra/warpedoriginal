/* Remove any previous hover-FAB UI */
#chat-fab, #chat-popover { display:none !important; }

/* Remove any legacy grounded chat forms/panels */
form#chat-form:not(#global-chat form#chat-form),
textarea#chat-input:not(#global-chat #chat-input),
#global-chat.legacy-hidden { display:none !important; }

/* Floating chat panel */
#global-chat{
  position:fixed; right:16px; bottom:16px;
  width:380px; max-height:70vh;
  background:rgba(30,30,30,.96);
  border:1px solid rgba(255,255,255,.12);
  border-radius:12px;
  display:flex; flex-direction:column;
  overflow:hidden; z-index:10000;
  box-shadow:0 16px 40px rgba(0,0,0,.45);
  color:#eee;
}
#global-chat .chat-header{
  padding:10px 12px;
  background:linear-gradient(90deg,#c14916,#8f2c12);
  color:#fff; font-weight:700;
  cursor:move; user-select:none;
  display:flex; align-items:center; justify-content:space-between;
}
#global-chat .chat-header .title{ pointer-events:none; }
#global-chat .chat-header .controls{ display:flex; gap:6px; }
#global-chat .btn{
  appearance:none; border:none; color:#fff; background:rgba(255,255,255,.2);
  padding:6px 8px; border-radius:6px; cursor:pointer;
}
#global-chat .btn:hover{ background:rgba(255,255,255,.3); }

#chat-messages{
  flex:1 1 auto;
  overflow-y:auto;
  padding:10px;
  display:flex; flex-direction:column; gap:6px;
}
.chat-msg{
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.08);
  border-radius:8px; padding:6px 8px; color:#eee; font-size:14px;
  word-wrap:break-word; overflow-wrap:anywhere;
}
.chat-msg .u{ font-weight:700; margin-right:6px; color:#ffd9c8; }

#global-chat form#chat-form{
  order:1; display:flex; flex-direction:column; gap:8px;
  padding:10px; border-top:1px solid rgba(255,255,255,.1);
}
#chat-input{
  min-height:64px; background:rgba(0,0,0,.3); color:#fff;
  border:1px solid rgba(255,255,255,.15); border-radius:8px; padding:8px 10px;
}
#chat-send{
  background:#c14916; color:#fff; border:none; border-radius:8px; padding:10px 12px;
  cursor:pointer;
}

@media (max-width:820px){
  #global-chat{ width:92vw; right:4vw; bottom:12px; }
}

/* [drag-movable-chat] */
#global-chat .chat-header {
  cursor: move;
  user-select: none;
  -webkit-user-select: none;
  touch-action: none;
}
#global-chat .chat-header.dragging {
  cursor: grabbing;
}


/* [chat-minimize-enter-send] */
/* When minimized, hide all but the header */
#global-chat.minimized {
  overflow: hidden;
}
#global-chat.minimized .chat-body,
#global-chat.minimized .chat-content,
#global-chat.minimized .messages,
#global-chat.minimized .message-list,
#global-chat.minimized .chat-footer,
#global-chat.minimized form,
#global-chat.minimized .input-area,
#global-chat.minimized .input-row,
#global-chat.minimized .composer {
  display: none !important;
}
/* Keep header draggable & clickable */
#global-chat .chat-header .minimize-toggle { user-select: none; }
/* Optional: change cursor on header double-click fallback */
#global-chat .chat-header { cursor: move; }

